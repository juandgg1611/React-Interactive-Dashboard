// src/data/savingsData.ts
import {
  SavingsGoal,
  SavingsSummary,
  AutoSavingRule,
} from "../types/savings.types";

export const savingsGoals: SavingsGoal[] = [
  {
    id: 1,
    name: "Compra de Auto",
    icon: "car",
    targetAmount: 20000,
    currentAmount: 15000,
    deadline: "2025-06-15",
    startDate: "2024-01-01",
    monthlyContribution: 833,
    category: "vehicle",
    status: "in-progress",
    priority: "high",
    color: "#2E8B57",
    description: "Auto nuevo para la familia",
    automaticRules: ["round-up", "excess-budget"],
    insights: ["Excelente ritmo", "Vas 3 meses adelantado"],
    progress: 75,
    history: [
      { date: "2024-01-01", amount: 5000, type: "initial" },
      { date: "2024-02-01", amount: 833, type: "monthly" },
      { date: "2024-03-01", amount: 833, type: "monthly" },
      { date: "2024-04-01", amount: 833, type: "monthly" },
      { date: "2024-04-15", amount: 500, type: "extra" },
      { date: "2024-05-01", amount: 833, type: "monthly" },
      { date: "2024-06-01", amount: 833, type: "monthly" },
    ],
  },
  {
    id: 2,
    name: "Viaje a Playa",
    icon: "beach",
    targetAmount: 5000,
    currentAmount: 1500,
    deadline: "2024-12-01",
    startDate: "2024-03-01",
    monthlyContribution: 438,
    category: "travel",
    status: "in-progress",
    priority: "medium",
    color: "#61bc84",
    description: "Vacaciones familiares en la playa",
    automaticRules: ["round-up"],
    insights: ["Considera aumentar $50/mes para lograrlo"],
    progress: 30,
    history: [
      { date: "2024-03-01", amount: 500, type: "initial" },
      { date: "2024-04-01", amount: 438, type: "monthly" },
      { date: "2024-05-01", amount: 438, type: "monthly" },
      { date: "2024-05-15", amount: 124, type: "round-up" },
    ],
  },
  {
    id: 3,
    name: "Fondo de Emergencia",
    icon: "shield",
    targetAmount: 10000,
    currentAmount: 4500,
    deadline: "2024-12-31",
    startDate: "2023-06-01",
    monthlyContribution: 500,
    category: "emergency",
    status: "in-progress",
    priority: "critical",
    color: "#8FBC8F",
    description: "Fondo para emergencias médicas o imprevistos",
    automaticRules: ["percentage-income", "excess-budget"],
    insights: ["Mantén este ritmo", "Falta 55% para completar"],
    progress: 45,
    history: [
      { date: "2023-06-01", amount: 1000, type: "initial" },
      { date: "2023-07-01", amount: 500, type: "monthly" },
      { date: "2023-08-01", amount: 500, type: "monthly" },
      { date: "2023-09-01", amount: 500, type: "monthly" },
      { date: "2023-10-01", amount: 500, type: "monthly" },
      { date: "2023-11-01", amount: 500, type: "monthly" },
      { date: "2023-12-01", amount: 500, type: "monthly" },
      { date: "2024-01-01", amount: 500, type: "monthly" },
      { date: "2024-02-01", amount: 500, type: "monthly" },
    ],
  },
  {
    id: 4,
    name: "Computadora Nueva",
    icon: "laptop",
    targetAmount: 1500,
    currentAmount: 1500,
    deadline: "2024-05-01",
    startDate: "2023-12-01",
    monthlyContribution: 250,
    category: "other",
    status: "completed",
    priority: "medium",
    color: "#c6ffe6",
    description: "Laptop para trabajo",
    automaticRules: ["round-up", "fixed-amount"],
    insights: ["¡Meta alcanzada!", "Completado 1 mes antes"],
    progress: 100,
    history: [
      { date: "2023-12-01", amount: 300, type: "initial" },
      { date: "2024-01-01", amount: 250, type: "monthly" },
      { date: "2024-02-01", amount: 250, type: "monthly" },
      { date: "2024-03-01", amount: 250, type: "monthly" },
      { date: "2024-04-01", amount: 250, type: "monthly" },
      { date: "2024-04-15", amount: 200, type: "extra" },
    ],
  },
  // META PAUSADA - NUEVA (USANDO CATEGORÍA "home")
  {
    id: 5,
    name: "Renovación de Baño Principal",
    icon: "home",
    targetAmount: 4500,
    currentAmount: 2200,
    deadline: "2024-11-30",
    startDate: "2024-01-01",
    monthlyContribution: 300,
    category: "home",
    status: "paused",
    priority: "medium",
    color: "#FFA726", // Naranja
    description: "Renovación completa del baño principal",
    automaticRules: ["fixed-amount"],
    insights: [
      "Meta pausada desde el mes pasado",
      "Considera reanudar para cumplir con el plazo original",
    ],
    progress: 48,
    history: [
      { date: "2024-01-01", amount: 1000, type: "initial" },
      { date: "2024-02-01", amount: 300, type: "monthly" },
      { date: "2024-03-01", amount: 300, type: "monthly" },
      { date: "2024-04-01", amount: 300, type: "monthly" },
      { date: "2024-04-15", amount: 300, type: "extra" },
    ],
  },
  // META ATRASADA - NUEVA (USANDO CATEGORÍA "luxury")
  {
    id: 6,
    name: "Fiesta de Aniversario",
    icon: "trophy",
    targetAmount: 3200,
    currentAmount: 1500,
    deadline: "2024-08-15",
    startDate: "2024-01-01",
    monthlyContribution: 400,
    category: "luxury",
    status: "behind",
    priority: "high",
    color: "#EF5350", // Rojo
    description: "Celebración de 10 años de matrimonio",
    automaticRules: ["percentage-income", "round-up"],
    insights: [
      "Vas atrasado en esta meta",
      "Considera aumentar el aporte mensual a $600 para alcanzar el objetivo",
    ],
    progress: 47,
    history: [
      { date: "2024-01-01", amount: 500, type: "initial" },
      { date: "2024-02-01", amount: 400, type: "monthly" },
      { date: "2024-03-01", amount: 400, type: "monthly" },
      { date: "2024-04-01", amount: 400, type: "monthly" },
      // Simulamos un retiro usando "transfer" con monto negativo
      {
        date: "2024-04-20",
        amount: -200,
        type: "transfer",
        description: "Retiro por emergencia",
      },
    ],
  },
  // OTRA META EN PROGRESO - ADICIONAL (USANDO CATEGORÍA "education")
  {
    id: 7,
    name: "Curso de Marketing Digital",
    icon: "education",
    targetAmount: 1200,
    currentAmount: 450,
    deadline: "2024-10-01",
    startDate: "2024-05-01",
    monthlyContribution: 150,
    category: "education",
    status: "in-progress",
    priority: "low",
    color: "#345e37",
    description: "Certificación profesional en marketing",
    automaticRules: ["round-up"],
    insights: [
      "Ritmo adecuado para el plazo",
      "Podrías completarlo antes si aumentas $50/mes",
    ],
    progress: 37,
    history: [
      { date: "2024-05-01", amount: 300, type: "initial" },
      { date: "2024-06-01", amount: 150, type: "monthly" },
    ],
  },
  // META NO INICIADA - ADICIONAL (para probar el estado "not-started")
  {
    id: 8,
    name: "Inversión en Bienes Raíces",
    icon: "investment",
    targetAmount: 50000,
    currentAmount: 0,
    deadline: "2026-12-31",
    startDate: "2025-01-01",
    monthlyContribution: 2000,
    category: "investment",
    status: "not-started",
    priority: "medium",
    color: "#7E57C2", // Púrpura
    description: "Inversión inicial para apartamento",
    automaticRules: ["percentage-income", "excess-budget"],
    insights: [
      "Meta programada para el próximo año",
      "Considera comenzar antes para mejores opciones",
    ],
    progress: 0,
    history: [],
  },
];

export const savingsSummary: SavingsSummary = {
  totalSaved: savingsGoals.reduce((sum, goal) => sum + goal.currentAmount, 0),
  totalGoals: savingsGoals.length,
  completedGoals: savingsGoals.filter((g) => g.status === "completed").length,
  upcomingDeadline:
    savingsGoals
      .filter((g) => g.status === "in-progress" || g.status === "behind")
      .sort(
        (a, b) =>
          new Date(a.deadline).getTime() - new Date(b.deadline).getTime()
      )[0]?.deadline || "2024-12-01",
  overallProgress: Math.round(
    savingsGoals.reduce((sum, goal) => sum + goal.progress, 0) /
      savingsGoals.length
  ),
  monthlyContributionTotal: savingsGoals
    .filter((g) => g.status === "in-progress" || g.status === "behind")
    .reduce((sum, goal) => sum + goal.monthlyContribution, 0),
  projectedCompletion: "Junio 2025",
};

export const autoSavingRules: AutoSavingRule[] = [
  {
    id: 1,
    name: "Redondeo de Transacciones",
    type: "round-up",
    amount: 0.25,
    targetGoalId: 2,
    isActive: true,
    lastExecution: "2024-05-15",
    totalSaved: 124,
  },
  {
    id: 2,
    name: "Aporte Mensual Automático",
    type: "fixed-amount",
    amount: 833,
    targetGoalId: 1,
    isActive: true,
    lastExecution: "2024-06-01",
    totalSaved: 4165,
  },
  {
    id: 3,
    name: "5% de cada ingreso",
    type: "percentage-income",
    percentage: 5,
    targetGoalId: 3,
    isActive: true,
    lastExecution: "2024-05-30",
    totalSaved: 1250,
  },
  // REGLA PARA META PAUSADA (inactiva)
  {
    id: 4,
    name: "Ahorro para Renovación",
    type: "fixed-amount",
    amount: 300,
    targetGoalId: 5,
    isActive: false,
    lastExecution: "2024-04-01",
    totalSaved: 1200,
  },
  // REGLA PARA META ATRASADA
  {
    id: 5,
    name: "Ahorro para Aniversario",
    type: "percentage-income",
    percentage: 3,
    targetGoalId: 6,
    isActive: true,
    lastExecution: "2024-06-01",
    totalSaved: 450,
  },
];
